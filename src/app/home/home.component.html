<ng-container *ngIf="user">
  <div class="container">
    <div class="row">
      <ng-container *ngIf="user.profile.city">
        <div
          infiniteScroll
          (scrolled)="onScroll()"
          [infiniteScrollDistance]="2"
          [infiniteScrollThrottle]="50"
          class="col-lg-8 row m-0 p-0"
        >
          <div class="col-sm-12">
            <create-post></create-post>
          </div>

          <ng-container *ngFor="let post of posts$ | async">
            <div class="col-sm-12">
              <div class="iq-card iq-card-block iq-card-stretch iq-card-height">
                <div class="iq-card-body">
                  <card-post [post]="post" [isOwn]="user.profile._id == post.owner._id"></card-post>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </ng-container>

      <div class="col-lg-4">
        <ng-container *ngIf="user.profile.city">
          <home-post-filter [city]="user.profile.city"></home-post-filter>
        </ng-container>

        <div class="iq-card">
          <div class="iq-card-header d-flex justify-content-between">
            <div class="iq-header-title">
              <h4 class="card-title">Events</h4>
            </div>
            <div class="iq-card-header-toolbar d-flex align-items-center">
              <div class="dropdown">
                <span
                  class="dropdown-toggle"
                  id="dropdownMenuButton"
                  data-toggle="dropdown"
                  aria-expanded="false"
                  role="button"
                >
                  <i class="ri-more-fill"></i>
                </span>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton" style="">
                  <a class="dropdown-item" href="#"><i class="ri-eye-fill mr-2"></i>View</a>
                  <a class="dropdown-item" href="#"><i class="ri-delete-bin-6-fill mr-2"></i>Delete</a>
                  <a class="dropdown-item" href="#"><i class="ri-pencil-fill mr-2"></i>Edit</a>
                  <a class="dropdown-item" href="#"><i class="ri-printer-fill mr-2"></i>Print</a>
                  <a class="dropdown-item" href="#"><i class="ri-file-download-fill mr-2"></i>Download</a>
                </div>
              </div>
            </div>
          </div>
          <div class="iq-card-body">
            <ul class="media-story m-0 p-0">
              <li class="d-flex mb-4 align-items-center">
                <img src="assets/images/page-img/s4.jpg" alt="story-img" class="rounded-circle img-fluid" />
                <div class="stories-data ml-3">
                  <h5>Has an match in</h5>
                  <p class="mb-0">1 hour ago</p>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="iq-card">
          <div class="iq-card-header d-flex justify-content-between">
            <div class="iq-header-title">
              <h4 class="card-title">Suggested Courts</h4>
            </div>
            <div class="iq-card-header-toolbar d-flex align-items-center">
              <div class="dropdown">
                <span
                  class="dropdown-toggle"
                  id="dropdownMenuButton01"
                  data-toggle="dropdown"
                  aria-expanded="false"
                  role="button"
                >
                  <i class="ri-more-fill"></i>
                </span>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton01" style="">
                  <a class="dropdown-item" href="#"><i class="ri-eye-fill mr-2"></i>View</a>
                  <a class="dropdown-item" href="#"><i class="ri-delete-bin-6-fill mr-2"></i>Delete</a>
                  <a class="dropdown-item" href="#"><i class="ri-pencil-fill mr-2"></i>Edit</a>
                  <a class="dropdown-item" href="#"><i class="ri-printer-fill mr-2"></i>Print</a>
                  <a class="dropdown-item" href="#"><i class="ri-file-download-fill mr-2"></i>Download</a>
                </div>
              </div>
            </div>
          </div>
          <div class="iq-card-body">
            <ul class="suggested-page-story m-0 p-0 list-inline">
              <li class="mb-3">
                <div class="d-flex align-items-center mb-3">
                  <img
                    src="https://scontent.feoh3-1.fna.fbcdn.net/v/t1.6435-9/78631745_742271169627213_7429559863140679680_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=09cbfe&_nc_ohc=xlETuHXW8S0AX9yEXUl&_nc_ht=scontent.feoh3-1.fna&oh=00_AT-B3DKq32dbTehqgN2UWqaD-C6cjlwZqvVBfpjgRKGkcw&oe=62B594A8"
                    alt="story-img"
                    class="rounded-circle img-fluid avatar-50"
                  />
                  <div class="stories-data ml-3">
                    <h5>Canaán - Canchas Sintéticas</h5>
                    <p class="mb-0">Via Armenia, Pereira, Risaralda</p>
                  </div>
                </div>
                <img
                  src="https://scontent.feoh3-1.fna.fbcdn.net/v/t1.6435-9/34605338_375646796289654_209685435876638720_n.jpg?_nc_cat=105&ccb=1-7&_nc_sid=8bfeb9&_nc_ohc=vybSFJO4uDcAX97wCSf&_nc_ht=scontent.feoh3-1.fna&oh=00_AT80e2XvGqZNqd6aZa-nEoewyhG4uvmf3G7D7IZ6vqbSNA&oe=62B88C4E"
                  class="img-fluid rounded"
                  alt="Responsive image"
                />
              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col-sm-12 text-center">
        <ng-container *ngIf="loading$ | async; else noResults">
          <img src="assets/images/page-img/page-load-loader.gif" alt="loader" style="height: 100px" />
        </ng-container>

        <ng-template #noResults>
          <p class="h6 my-5">No more results</p>
        </ng-template>
      </div>
    </div>
  </div>
</ng-container>
